<template>
    <div class="pee">
        <div class="grid">
            <div class="grid__item" data-size="1280x853">
                <a href="img/original/1.jpg" class="img-wrap"><img src="@/assets/img/thumbs/1.jpg" alt="img01" />
                    <div class="description description--grid">Assemblage</div>
                </a>
            </div>
            <div class="grid__item" data-size="958x1280">
                <a href="img/original/2.jpg" class="img-wrap"><img src="@/assets/img/thumbs/2.jpg" alt="img02" />
                    <div class="description description--grid">Demesne</div>
                </a>
            </div>
            <div class="grid__item" data-size="837x1280">
                <a href="img/original/3.jpg" class="img-wrap"><img src="@/assets/img/thumbs/3.jpg" alt="img03" />
                    <div class="description description--grid">Felicity</div>
                </a>
            </div>
            <div class="grid__item" data-size="1280x961">
                <a href="img/original/4.jpg" class="img-wrap"><img src="@/assets/img/thumbs/4.jpg" alt="img04" />
                    <div class="description description--grid">Propinquity</div>
                </a>
            </div>
            <div class="grid__item" data-size="1280x1131">
                <a href="img/original/5.jpg" class="img-wrap"><img src="@/assets/img/thumbs/5.jpg" alt="img05" />
                    <div class="description description--grid">Ephemeral</div>
                </a>
            </div>
            <div class="grid__item" data-size="1280x857">
                <a href="img/original/6.jpg" class="img-wrap"><img src="@/assets/img/thumbs/6.jpg" alt="img06" />
                    <div class="description description--grid">Surreptitious</div>
                </a>
            </div>
            <div class="grid__item" data-size="1280x1280">
                <a href="img/original/7.jpg" class="img-wrap"><img src="@/assets/img/thumbs/7.jpg" alt="img07" />
                    <div class="description description--grid">Scintilla</div>
                </a>
            </div>
            <div class="grid__item" data-size="1280x853">
                <a href="img/original/8.jpg" class="img-wrap"><img src="@/assets/img/thumbs/8.jpg" alt="img08" />
                    <div class="description description--grid">Vestigial</div>
                </a>
            </div>
            <div class="grid__item" data-size="865x1280">
                <a href="img/original/9.jpg" class="img-wrap"><img src="@/assets/img/thumbs/9.jpg" alt="img09" />
                    <div class="description description--grid">Zephyr</div>
                </a>
            </div>
            <div class="grid__item" data-size="1280x1280">
                <a href="img/original/10.jpg" class="img-wrap"><img src="@/assets/img/thumbs/10.jpg" alt="img10" />
                    <div class="description description--grid">Desideratum</div>
                </a>
            </div>
            <div class="grid__item" data-size="1280x850">
                <a href="img/original/11.jpg" class="img-wrap"><img src="@/assets/img/thumbs/11.jpg" alt="img11" />
                    <div class="description description--grid">Quixotic</div>
                </a>
            </div>
            <div class="grid__item" data-size="1280x853">
                <a href="img/original/1.jpg" class="img-wrap"><img src="@/assets/img/thumbs/1.jpg" alt="img01" />
                    <div class="description description--grid">Assemblage</div>
                </a>
            </div>
            <div class="grid__item" data-size="958x1280">
                <a href="img/original/2.jpg" class="img-wrap"><img src="@/assets/img/thumbs/2.jpg" alt="img02" />
                    <div class="description description--grid">Demesne</div>
                </a>
            </div>
            <div class="grid__item" data-size="837x1280">
                <a href="img/original/3.jpg" class="img-wrap"><img src="@/assets/img/thumbs/3.jpg" alt="img03" />
                    <div class="description description--grid">Felicity</div>
                </a>
            </div>
            <div class="grid__item" data-size="1280x961">
                <a href="img/original/4.jpg" class="img-wrap"><img src="@/assets/img/thumbs/4.jpg" alt="img04" />
                    <div class="description description--grid">Propinquity</div>
                </a>
            </div>
            <div class="grid__item" data-size="1280x1131">
                <a href="img/original/5.jpg" class="img-wrap"><img src="@/assets/img/thumbs/5.jpg" alt="img05" />
                    <div class="description description--grid">Ephemeral</div>
                </a>
            </div>
            <div class="grid__item" data-size="1280x857">
                <a href="img/original/6.jpg" class="img-wrap"><img src="@/assets/img/thumbs/6.jpg" alt="img06" />
                    <div class="description description--grid">Surreptitious</div>
                </a>
            </div>
            <div class="grid__item" data-size="1280x1280">
                <a href="img/original/7.jpg" class="img-wrap"><img src="@/assets/img/thumbs/7.jpg" alt="img07" />
                    <div class="description description--grid">Scintilla</div>
                </a>
            </div>
            <div class="grid__item" data-size="1280x853">
                <a href="img/original/8.jpg" class="img-wrap"><img src="@/assets/img/thumbs/8.jpg" alt="img08" />
                    <div class="description description--grid">Vestigial</div>
                </a>
            </div>
            <div class="grid__item" data-size="865x1280">
                <a href="img/original/9.jpg" class="img-wrap"><img src="@/assets/img/thumbs/9.jpg" alt="img09" />
                    <div class="description description--grid">Zephyr</div>
                </a>
            </div>
            <div class="grid__item" data-size="1280x1280">
                <a href="img/original/10.jpg" class="img-wrap"><img src="@/assets/img/thumbs/10.jpg" alt="img10" />
                    <div class="description description--grid">Desideratum</div>
                </a>
            </div>
            <div class="grid__item" data-size="1280x850">
                <a href="img/original/11.jpg" class="img-wrap"><img src="@/assets/img/thumbs/11.jpg" alt="img11" />
                    <div class="description description--grid">Quixotic</div>
                </a>
            </div>
		</div>
	</div>
</template>

<script>
export default {
    name: 'GridPost',
    data() {
        return {
            Screen: 0,
            cntWidth: 0,
            ElementCnt: 0,
            imgWidth: 0,
            margin: 0,
            option: []
        }
    },
    mounted(){
        let element = this.$el.querySelectorAll('.grid__item');

        this.Screen = window.innerWidth;
        this.cntWidth = Math.floor(this.Screen / 300);
        this.ElementCnt = element.length;
        this.imgWidth = 300;
        this.margin = 50;
        this.option = [];

        const ResizeEvent = () => {
            element = this.$el.querySelectorAll('.grid__item');

            for(let i=0; i<this.cntWidth; i++){
                this.option.push({ name: i, height: 0, meta: [] })
            }
            let min = this.option[0];

            for(let i=0; i<this.ElementCnt; i++){
                for(let j=0; j<this.option.length; j++){
                    if(min.height > this.option[j].height){
                        min = this.option[j];
                    }
                }

                if(min.name != 0){
                    element[i].style.left = `${ ( min.name * this.imgWidth ) }px`;
                }

                if(this.option[min.name].height != 0){
                    element[i].style.top = `${ ( this.option[min.name].height ) }px`;
                }

                this.option[min.name].height = ( this.option[min.name].height + element[i].offsetHeight + this.margin );
                this.option[min.name].meta.push( i );
            }
        }

        ResizeEvent();
        window.addEventListener('resize', () => {
            this.Screen = window.innerWidth;
            this.cntWidth = Math.floor(this.Screen / 300);
            this.ElementCnt = element.length;
            this.imgWidth = 300;
            this.margin = 50;
            this.option = [];

            ResizeEvent();
        });

    }
}
</script>

<style lang="scss" scoped>
    .pee {
        & {
            position:relative;
        }

        & > .grid {
            & {
                font-size: 0;
                text-align: center;
            }

            & > .grid__item {
                width: 300px;
                display: inline-block;
                vertical-align: top;
                position:absolute;
                left:0;
                top:0;
            }
        }
    }
</style>
